{% extends 'base.html' %}
{% block title %}Chapter {{ chapter.chapter_id }}{% endblock %}
{% block content %}
  <div class="breadcrumbs"><a href="{{ url_for('index') }}">← Back to outline</a></div>
  <div class="card">
    <div class="header">
      <h1>Chapter {{ chapter.chapter_id }}</h1>
      <div class="badge">{{ chapter.chapter_title }}</div>
    </div>

    {% if chapter.intro %}
    <section class="module" style="margin-bottom: 16px;">
      <h2>Introduction</h2>
      <pre>{{ chapter.intro }}</pre>
    </section>
    {% endif %}

    {% if chapter.summary %}
    <section class="module" style="margin-bottom: 16px; background: var(--primary-weak); border-radius: 8px; padding: 12px;">
      <h2>Summary</h2>
      <pre>{{ chapter.summary }}</pre>
    </section>
    {% endif %}

    {% for m in chapter.modules %}
      <section class="module" style="margin-bottom: 16px;">
        <h3>Module {{ m.id }}: {{ m.title }}</h3>
        <pre>{{ m.content | join('\n') }}</pre>
      </section>
    {% endfor %}

    {% if chapter.action_items %}
    <section class="module" style="margin-bottom: 16px; background: #e7f5ff; border-radius: 8px; padding: 12px;">
      <h2>Action Items</h2>
      <pre>{{ chapter.action_items }}</pre>
    </section>
    {% endif %}

    <nav class="pagination">
      <div>
        {% if prev_id %}
          <a class="button secondary" href="{{ url_for('chapter', chapter_id=prev_id) }}">← Previous</a>
        {% else %}
          <span class="badge">Start</span>
        {% endif %}
      </div>
      <div><a class="button" href="{{ url_for('index') }}">Chapters</a></div>
      <div>
        {% if next_id %}
          <a class="button secondary" href="{{ url_for('chapter', chapter_id=next_id) }}">Next →</a>
        {% else %}
          <span class="badge">End</span>
        {% endif %}
      </div>
    </nav>
  </div>
{% endblock %}
